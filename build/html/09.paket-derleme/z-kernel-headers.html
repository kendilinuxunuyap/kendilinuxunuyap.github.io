
<!DOCTYPE html>

<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>kernel-headers &#8212; distro Wiki  belgelendirmesi</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="canonical" href="https://kendilinuxunuyap.github.io/09.paket-derleme/z-kernel-headers.html" />
    <link rel="index" title="Dizin" href="../genindex.html" />
    <link rel="search" title="Ara" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="kernel-headers">
<h1>kernel-headers<a class="headerlink" href="#kernel-headers" title="Permalink to this heading">¶</a></h1>
<p>Kernel-headers paketi, Linux çekirdeği başlık dosyalarını barındırır. Kernel-headers paketi derleme yaparsanız lazım olacaktır.</p>
<section id="derleme">
<h2>Derleme<a class="headerlink" href="#derleme" title="Permalink to this heading">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="nv">name</span><span class="o">=</span><span class="s2">&quot;kernel-headers&quot;</span>
<span class="nv">version</span><span class="o">=</span><span class="s2">&quot;6.9.9&quot;</span>
<span class="nv">description</span><span class="o">=</span><span class="s2">&quot;Linux kernel&quot;</span>
<span class="nv">source</span><span class="o">=</span><span class="s2">&quot;https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-</span><span class="nv">$version</span><span class="s2">.tar.xz&quot;</span>
<span class="nv">depends</span><span class="o">=</span><span class="s2">&quot;kernel&quot;</span>
<span class="nv">builddepend</span><span class="o">=</span><span class="s2">&quot;rsync,bc,cpio,gettext,elfutils,pahole,perl,python,tar,xz-utils&quot;</span>
<span class="nv">group</span><span class="o">=</span><span class="s2">&quot;sys.kernel&quot;</span>
<span class="nv">display</span><span class="o">=</span><span class="s2">&quot;:</span><span class="k">$(</span>ls<span class="w"> </span>/tmp/.X11-unix/*<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s#/tmp/.X11-unix/X##&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="k">)</span><span class="s2">&quot;</span><span class="w">      </span><span class="c1">#Detect the name of the display in use</span>
<span class="nv">user</span><span class="o">=</span><span class="k">$(</span>who<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;(&#39;</span><span class="nv">$display</span><span class="s1">&#39;)&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span><span class="w">    </span><span class="c1">#Detect the user using such display</span>
<span class="nv">ROOTBUILDDIR</span><span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$user</span><span class="s2">/distro/build&quot;</span><span class="w"> </span><span class="c1"># Derleme konumu</span>
<span class="nv">BUILDDIR</span><span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$user</span><span class="s2">/distro/build/build-</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1">#Derleme yapılan paketin derleme konumun</span>
<span class="nv">DESTDIR</span><span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$user</span><span class="s2">/distro/rootfs&quot;</span><span class="w"> </span><span class="c1">#Paketin yükleneceği sistem konumu</span>
<span class="nv">PACKAGEDIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="w"> </span><span class="c1">#paketin derleme talimatının verildiği konum</span>
<span class="nv">SOURCEDIR</span><span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$user</span><span class="s2">/distro/build/</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1">#Paketin kaynak kodlarının olduğu konum</span>
initsetup<span class="o">(){</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w">  </span><span class="nv">$ROOTBUILDDIR</span><span class="w"> </span><span class="c1">#derleme dizini yoksa oluşturuluyor</span>
<span class="w">        </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$ROOTBUILDDIR</span>/*<span class="w"> </span><span class="c1">#içeriği temizleniyor</span>
<span class="w">        </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$ROOTBUILDDIR</span><span class="w"> </span><span class="c1">#dizinine geçiyoruz</span>
<span class="w">        </span>wget<span class="w"> </span><span class="si">${</span><span class="nv">source</span><span class="si">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span>*<span class="se">\ </span>*<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>mv<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">f</span><span class="p">// /</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="c1">#isimde boşluk varsa silme işlemi yapılıyor</span>
<span class="w">        </span><span class="nv">dowloadfile</span><span class="o">=</span><span class="k">$(</span>ls<span class="p">|</span>head<span class="w"> </span>-1<span class="k">)</span>
<span class="w">        </span><span class="nv">filetype</span><span class="o">=</span><span class="k">$(</span>file<span class="w"> </span>-b<span class="w"> </span>--extension<span class="w"> </span><span class="nv">$dowloadfile</span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;/&#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">filetype</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;???&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span>unzip<span class="w">  </span><span class="si">${</span><span class="nv">dowloadfile</span><span class="si">}</span><span class="p">;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span><span class="si">${</span><span class="nv">dowloadfile</span><span class="si">}</span><span class="p">;</span><span class="k">fi</span>
<span class="w">        </span><span class="nv">director</span><span class="o">=</span><span class="k">$(</span>find<span class="w"> </span>./*<span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">0</span><span class="w"> </span>-type<span class="w"> </span>d<span class="k">)</span>
<span class="w">        </span><span class="nv">directorname</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="si">${</span><span class="nv">director</span><span class="si">}</span><span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">directorname</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span>mv<span class="w"> </span><span class="nv">$directorname</span><span class="w"> </span><span class="si">${</span><span class="nv">name</span><span class="si">}</span>-<span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="p">;</span><span class="k">fi</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$BUILDDIR</span><span class="o">&amp;&amp;</span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$DESTDIR</span><span class="o">&amp;&amp;</span><span class="nb">cd</span><span class="w"> </span><span class="nv">$SOURCEDIR</span>
<span class="o">}</span>
setup<span class="o">(){</span>
<span class="w">        </span>cp<span class="w"> </span>-prvf<span class="w"> </span><span class="nv">$PACKAGEDIR</span>/files/<span class="w"> </span><span class="nv">$SOURCEDIR</span>/
<span class="w">        </span>patch<span class="w"> </span>-Np1<span class="w"> </span>-i<span class="w"> </span><span class="nv">$PACKAGEDIR</span>/files/patch-<span class="nv">$version</span>
<span class="w">        </span>cp<span class="w"> </span><span class="nv">$PACKAGEDIR</span>/files/config<span class="w"> </span><span class="nv">$SOURCEDIR</span>/.config
<span class="w">        </span>make<span class="w"> </span>olddefconfig
<span class="o">}</span>
build<span class="o">(){</span>
<span class="w">        </span>make<span class="w"> </span>bzImage<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="w">        </span>make<span class="w"> </span>modules<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="o">}</span>
package<span class="o">(){</span>
<span class="w">        </span><span class="nv">arch</span><span class="o">=</span><span class="s2">&quot;x86&quot;</span>
<span class="w">        </span><span class="nv">kernelbuilddir</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">DESTDIR</span><span class="si">}</span><span class="s2">/lib/modules/</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">/build&quot;</span>
<span class="w">        </span><span class="c1"># install bzImage</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/boot&quot;</span>
<span class="w">        </span>install<span class="w"> </span>-Dm644<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>make<span class="w"> </span>-s<span class="w"> </span>image_name<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/boot/vmlinuz-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="c1">#make INSTALL_PATH=$DESTDIR install ARCH=amd64</span>
<span class="w">        </span><span class="c1"># install modules</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">DESTDIR</span><span class="si">}</span>/lib/modules/<span class="si">${</span><span class="nv">version</span><span class="si">}</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$DESTDIR</span>/usr/src
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">DESTDIR</span><span class="si">}</span>/lib/modules/<span class="si">${</span><span class="nv">version</span><span class="si">}</span>/build
<span class="w">        </span>make<span class="w"> </span><span class="nv">INSTALL_MOD_PATH</span><span class="o">=</span><span class="nv">$DESTDIR</span><span class="w"> </span>modules_install<span class="w"> </span><span class="nv">INSTALL_MOD_STRIP</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="w">        </span>rm<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">DESTDIR</span><span class="si">}</span><span class="s2">/lib/modules/</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>/<span class="o">{</span>source,build<span class="o">}</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<span class="w">        </span>depmod<span class="w"> </span>--all<span class="w"> </span>--verbose<span class="w"> </span>--basedir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<span class="w">        </span><span class="c1"># install build directories</span>
<span class="w">        </span>install<span class="w"> </span>.config<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/boot/config-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/kernel&quot;</span><span class="w"> </span>-m644<span class="w"> </span>kernel/Makefile
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/arch/</span><span class="nv">$arch</span><span class="s2">&quot;</span><span class="w"> </span>-m644<span class="w"> </span>arch/<span class="nv">$arch</span>/Makefile
<span class="w">        </span>cp<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-a<span class="w"> </span>scripts
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/tools/objtool&quot;</span><span class="w"> </span>tools/objtool/objtool
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span>/<span class="o">{</span>fs/xfs,mm<span class="o">}</span>
<span class="w">        </span>ln<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;../../lib/modules/</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">/build&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/src/linux-headers-</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-m644<span class="w"> </span>Makefile<span class="w"> </span>Module.symvers<span class="w"> </span>System.map<span class="w"> </span>vmlinux
<span class="w">        </span><span class="c1"># install libc headers</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/include/linux&quot;</span>
<span class="w">        </span>cp<span class="w"> </span>-v<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/include/&quot;</span><span class="w"> </span>-a<span class="w"> </span>include/linux/
<span class="w">        </span>cp<span class="w"> </span>-v<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/&quot;</span><span class="w"> </span>-a<span class="w"> </span>tools/include
<span class="w">        </span>make<span class="w"> </span>headers_install<span class="w"> </span><span class="nv">INSTALL_HDR_PATH</span><span class="o">=</span><span class="nv">$DESTDIR</span>/usr
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/arch/</span><span class="nv">$arch</span><span class="s2">&quot;</span>
<span class="w">        </span>cp<span class="w"> </span>-v<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-a<span class="w"> </span>include
<span class="w">        </span>cp<span class="w"> </span>-v<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/arch/</span><span class="nv">$arch</span><span class="s2">&quot;</span><span class="w"> </span>-a<span class="w"> </span>arch/<span class="nv">$arch</span>/include
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/arch/</span><span class="nv">$arch</span><span class="s2">/kernel&quot;</span><span class="w"> </span>-m644<span class="w"> </span>arch/<span class="nv">$arch</span>/kernel/asm-offsets.*
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/md&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/md/*.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/net/mac80211&quot;</span><span class="w"> </span>-m644<span class="w"> </span>net/mac80211/*.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/media/i2c&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/media/i2c/msp3400-driver.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/media/usb/dvb-usb&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/media/usb/dvb-usb/*.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/media/dvb-frontends&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/media/dvb-frontends/*.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/media/tuners&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/media/tuners/*.h
<span class="w">        </span>install<span class="w"> </span>-Dt<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/drivers/iio/common/hid-sensors&quot;</span><span class="w"> </span>-m644<span class="w"> </span>drivers/iio/common/hid-sensors/*.h<span class="w">           </span><span class="c1"># https://bugs.archlinux.org/task/71392</span>
<span class="w">        </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;Kconfig*&#39;</span><span class="w"> </span>-exec<span class="w"> </span>install<span class="w"> </span>-Dm644<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/{}&quot;</span><span class="w"> </span><span class="se">\;</span>
<span class="w">        </span>find<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span>-printf<span class="w"> </span><span class="s1">&#39;Removing %P\n&#39;</span><span class="w"> </span>-delete<span class="w">                                       </span><span class="c1"># clearing</span>
<span class="w">        </span>find<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.o&#39;</span><span class="w"> </span>-printf<span class="w"> </span><span class="s1">&#39;Removing %P\n&#39;</span><span class="w"> </span>-delete
<span class="w">        </span><span class="c1">#--------------------------------------                                         install                                                                                 ------------------------------------</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>-rd<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>file<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>file<span class="w"> </span>-Sib<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span>application/x-sharedlib<span class="se">\;</span>*<span class="o">)</span><span class="w">      </span><span class="c1"># Libraries (.so)</span>
<span class="w">                </span>strip<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="w">            </span>application/x-executable<span class="se">\;</span>*<span class="o">)</span><span class="w">     </span><span class="c1"># Binaries</span>
<span class="w">                </span>strip<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="w">            </span>application/x-pie-executable<span class="se">\;</span>*<span class="o">)</span><span class="w"> </span><span class="c1"># Relocatable binaries</span>
<span class="w">                </span>strip<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;;</span>
<span class="w">        </span><span class="k">esac</span>
<span class="w">    </span><span class="k">done</span><span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>find<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-perm<span class="w"> </span>-u+x<span class="w"> </span>!<span class="w"> </span>-name<span class="w"> </span>vmlinux<span class="w"> </span>-print0<span class="o">)</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/vmlinux&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>strip<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">/vmlinux&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">        </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/src&quot;</span>
<span class="w">        </span>ln<span class="w"> </span>-sr<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kernelbuilddir</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">/usr/src/linux&quot;</span>
<span class="w">    </span>mv<span class="w"> </span>-vf<span class="w"> </span>System.map<span class="w"> </span><span class="nv">$DESTDIR</span>/boot/System.map-<span class="nv">$version</span>
<span class="w">    </span>find<span class="w"> </span><span class="si">${</span><span class="nv">DESTDIR</span><span class="si">}</span>/<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="w"> </span>-exec<span class="w"> </span>unxz<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
<span class="w">    </span>depmod<span class="w"> </span>-b<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DESTDIR</span><span class="s2">&quot;</span><span class="w"> </span>-F<span class="w"> </span><span class="nv">$DESTDIR</span>/boot/System.map-<span class="nv">$version</span><span class="w"> </span><span class="nv">$version</span>
<span class="o">}</span>
initsetup<span class="w">       </span><span class="c1"># initsetup fonksiyonunu çalıştırır ve kaynak dosyayı indirir</span>
setup<span class="w">           </span><span class="c1"># setup fonksiyonu çalışır ve derleme öncesi kaynak dosyaların ayalanması sağlanır.</span>
build<span class="w">           </span><span class="c1"># build fonksiyonu çalışır ve kaynak dosyaları derlenir.</span>
package<span class="w">         </span><span class="c1"># package fonksiyonu çalışır, yükleme öncesi ayarlamalar yapılır ve yüklenir.</span>
</pre></div>
</div>
<p>Yukarıdaki kodların sorunsuz çalışabilmesi için ek dosyayalara ihtiyaç vardır. Bu ek dosyaları indirmek için <a class="reference external" href="https://kendilinuxunuyap.github.io/_static/files/kernel-headers/files.tar">tıklayınız.</a> tar dosyasını indirdikten sonra istediğiniz bir konumda <strong>kernel-headers</strong> adında bir dizin oluşturun ve tar dosyasını oluşturulan dizin içinde açınınız. Yukarı verilen script kodlarını build adında bir dosya oluşturup içine kopyalayın ve kaydedin. Aşağıda gösterilen komutları paket için oluşturulan dizinin içinde terminal açarak çalıştırınız.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>build<span class="o">&amp;&amp;</span>sudo<span class="w"> </span>./build
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.svg" alt="Logo"/>
    
  </a>
</p>








<h3>Gezinti</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../00.kapak/0-kapak.html">KENDİ LİNUX'UNU YAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00.kapak/1-icindekiler.html">İçindekiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.giris/index.html">Temel Kavramlar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.on-hazirlik/index.html">Ön Hazırlık</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.derleme-araclari/index.html">Derleme Araçları</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Paket Derleme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11.paket-sistemi/index.html">Paket Sistemi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12.iso-hazirlama/index.html">iso Hazırlama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13.sistem-kurulumu/index.html">Sistem Kurulumu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14.X-derleme/index.html">X Pencere Sistemi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15.yardimci-konular/index.html">Yardımcı Konular</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1-about.html">Hakkımda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2-contact.html">İletişim</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;distro 2023.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/09.paket-derleme/z-kernel-headers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>